---
layout: post
title: HTTP学习のHTTP改写
categories: 学习
tags: HTTP
---

Hi buddy：

很高兴收到你的来信，关于HTTP改写，我在工作种只遇到过3种，分别为HTTP重定向、request改写和response改写，在这里就谈一谈我所知道的内容，希望能对你有所帮助。当然，如果有不对的地方，可以留言。

首先说一下，什么是HTTP改写，就是当你访问某个URL时，由于一些特殊的原因，你会实际访问到的可能是另一个URL，比如，你现在想访问http://baidu.com ，当你在浏览器里访问这个URL后，百度的服务器会把你的访问转向http://youdao.com （只是这样假设而已），最后你在浏览器上看到的页面就是有道的页面了。

至于HTTP改写有什么用处，比如某一个服务出问题了，我们可以用HTTP改写将用户的访问转到别的服务上去，这只是使用情景之一，还有很多其他的使用情景，这里就不过多罗列了。

接下来具体说说这3种改写方式的区别。

HTTP重定向（http redirect）：当用户访问URL1时，服务前端的负载均衡设备会给用户返回一个重定向错误码和重定向的地址URL2，浏览器在接收到错误码后会自动再次访问新的URL2

request改写（forward）：当用户访问URL1时，服务前端的负载均衡设备会自动修改URL，然后再进行转发，也就是去访问URL2

**注：http redirect会向服务器访问两次，而forward只会访问一次，后者的效率更高一点**

response改写：和前面两个不同的是，这个改写是对服务器响应数据进行改写，主要应用场景是为了防止客户直接连接后端的某个URL，比如服务器返回的URL地址为http://youdao.com 但是到了负载均衡设备处，为了方式客户直接连接这个URL，负载均衡设备将此URL改写为了http://baidu.com 这样用户就会觉得自己是在访问百度，但其实他访问的是有道的数据 \^_^

**将第三种改写和前两种改写配合使用，便可将用户完美的蒙在鼓里了 \^o^ ， 所以，你以为自己访问的是百度，但其实很可能是有道哦！**
                   
　　　　　　　　　　　　　　　　　　　　　　　　          　　　　Jason Ai